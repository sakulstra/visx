(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[46],{"Hn+V":function(e,t,n){"use strict";n.d(t,"a",(function(){return re})),n.d(t,"b",(function(){return ae}));var r=n("zjfJ"),a=n("ERkP"),i=n.n(a),o=n("cjvV"),s=n("67po"),u=n("oT5u"),l=n.n(u),h=n("aWzz"),d=n.n(h),c=n("JmwF"),f=n("g2fB"),g=n("wQia"),p=n.n(g);function x(e,t){if(!e.invert){var n=e.range(),r=n[0],a=n[1],i=0,o=e.step()*(a-r)/Math.abs(a-r);if(o>0)for(;t>r+o*(i+1);)i+=1;else for(;t<r+o*(i+1);)i+=1;return i}return e.invert(t)}function y(e,t,n,r){var a,i=x(e,t+(t<n?-r:r)),o=x(e,n+(n<t?-r:r)),s=Math.min(i,o),u=Math.max(i,o);if(e.invert)a={start:s,end:u};else{for(var l=[],h=e.domain(),d=s;d<=u;d+=1)l.push(h[d]);a={values:l}}return a}function m(e){if("undefined"!==typeof window&&window.TouchEvent&&e instanceof TouchEvent)return{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY};var t=e;return{pageX:t.pageX,pageY:t.pageY}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return M(b(t=e.call.apply(e,[this].concat(r))||this),"handleDragStart",(function(e){var n=t.props,r=n.onBrushHandleChange,a=n.type;r&&r(a,m(e.event))})),M(b(t),"handleDragMove",(function(e){var n=t.props,r=n.updateBrush,a=n.type,i=n.isControlled;e.isDragging&&!i&&r((function(t){var n=t.start,r=t.end,i=0,o=Math.max(n.x,r.x),s=Math.min(n.x,r.x),u=Math.max(n.y,r.y),l=Math.min(n.y,r.y);switch(a){case"right":return i=o+e.dx,v({},t,{activeHandle:a,extent:v({},t.extent,{x0:Math.max(Math.min(i,n.x),t.bounds.x0),x1:Math.min(Math.max(i,n.x),t.bounds.x1)})});case"left":return i=s+e.dx,v({},t,{activeHandle:a,extent:v({},t.extent,{x0:Math.min(i,r.x),x1:Math.max(i,r.x)})});case"bottom":return i=u+e.dy,v({},t,{activeHandle:a,extent:v({},t.extent,{y0:Math.min(i,n.y),y1:Math.max(i,n.y)})});case"top":return i=l+e.dy,v({},t,{activeHandle:a,extent:v({},t.extent,{y0:Math.min(i,r.y),y1:Math.max(i,r.y)})});default:return t}}))})),M(b(t),"handleDragEnd",(function(){var e=t.props,n=e.updateBrush,r=e.onBrushEnd,a=e.onBrushHandleChange;e.isControlled||n((function(e){var t=e.start,n=e.end,a=e.extent;t.x=Math.min(a.x0,a.x1),t.y=Math.min(a.y0,a.y0),n.x=Math.max(a.x0,a.x1),n.y=Math.max(a.y0,a.y1);var i=v({},e,{start:t,end:n,activeHandle:null,isBrushing:!1,extent:{x0:Math.min(t.x,n.x),x1:Math.max(t.x,n.x),y0:Math.min(t.y,n.y),y1:Math.max(t.y,n.y)}});return r&&r(i),i})),a&&a()})),t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.stageWidth,n=e.stageHeight,r=e.brush,a=e.type,o=e.handle,s=e.isControlled,u=e.isDragInProgress,l=o.x,h=o.y,d=o.width,c=o.height,f="right"===a||"left"===a?"ew-resize":"ns-resize";return i.a.createElement(p.a,{width:t,height:n,onDragStart:this.handleDragStart,onDragMove:this.handleDragMove,onDragEnd:this.handleDragEnd,resetOnStart:!0,isDragging:s?u:void 0},(function(e){var o=e.dragStart,u=e.dragEnd,g=e.dragMove,p=e.isDragging;return i.a.createElement("g",null,p&&i.a.createElement("rect",{fill:"transparent",width:t,height:n,style:{cursor:f},onMouseMove:g,onMouseUp:s?void 0:u,onMouseLeave:s?void 0:u}),i.a.createElement("rect",{x:l,y:h,width:d,height:c,fill:"transparent",className:"visx-brush-handle-"+a,onPointerDown:o,onPointerMove:g,onPointerUp:s?void 0:u,style:{cursor:f,pointerEvents:r.activeHandle||r.isBrushing?"none":"all"}}))}))},r}(i.a.Component);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}M(w,"propTypes",{stageWidth:d.a.number.isRequired,stageHeight:d.a.number.isRequired,updateBrush:d.a.func.isRequired,onBrushEnd:d.a.func,handle:d.a.shape({x:d.a.number.isRequired,y:d.a.number.isRequired,width:d.a.number.isRequired,height:d.a.number.isRequired}).isRequired,isControlled:d.a.bool,isDragInProgress:d.a.bool,onBrushHandleChange:d.a.func});var D=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return S(E(t=e.call.apply(e,[this].concat(r))||this),"cornerDragMove",(function(e){var n=t.props,r=n.updateBrush,a=n.type;e.isDragging&&r((function(t){var n=t.start,r=t.end,i=Math.max(n.x,r.x),o=Math.min(n.x,r.x),s=Math.max(n.y,r.y),u=Math.min(n.y,r.y),l=0,h=0;switch(a){case"topRight":return l=i+e.dx,h=u+e.dy,O({},t,{activeHandle:a,extent:O({},t.extent,{x0:Math.max(Math.min(l,n.x),t.bounds.x0),x1:Math.min(Math.max(l,n.x),t.bounds.x1),y0:Math.max(Math.min(h,r.y),t.bounds.y0),y1:Math.min(Math.max(h,r.y),t.bounds.y1)})});case"topLeft":return l=o+e.dx,h=u+e.dy,O({},t,{activeHandle:a,extent:O({},t.extent,{x0:Math.max(Math.min(l,r.x),t.bounds.x0),x1:Math.min(Math.max(l,r.x),t.bounds.x1),y0:Math.max(Math.min(h,r.y),t.bounds.y0),y1:Math.min(Math.max(h,r.y),t.bounds.y1)})});case"bottomLeft":return l=o+e.dx,h=s+e.dy,O({},t,{activeHandle:a,extent:O({},t.extent,{x0:Math.max(Math.min(l,r.x),t.bounds.x0),x1:Math.min(Math.max(l,r.x),t.bounds.x1),y0:Math.max(Math.min(h,n.y),t.bounds.y0),y1:Math.min(Math.max(h,n.y),t.bounds.y1)})});case"bottomRight":return l=i+e.dx,h=s+e.dy,O({},t,{activeHandle:a,extent:O({},t.extent,{x0:Math.max(Math.min(l,n.x),t.bounds.x0),x1:Math.min(Math.max(l,n.x),t.bounds.x1),y0:Math.max(Math.min(h,n.y),t.bounds.y0),y1:Math.min(Math.max(h,n.y),t.bounds.y1)})});default:return t}}))})),S(E(t),"cornerDragEnd",(function(){var e=t.props,n=e.updateBrush,r=e.onBrushEnd;n((function(e){var t=e.start,n=e.end,a=e.extent;t.x=Math.min(a.x0,a.x1),t.y=Math.min(a.y0,a.y0),n.x=Math.max(a.x0,a.x1),n.y=Math.max(a.y0,a.y1);var i=O({},e,{start:t,end:n,activeHandle:null,domain:{x0:Math.min(t.x,n.x),x1:Math.max(t.x,n.x),y0:Math.min(t.y,n.y),y1:Math.max(t.y,n.y)}});return r&&r(i),i}))})),t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.type,n=e.brush,r=e.stageWidth,a=e.stageHeight,o=e.style,s=e.corner,u=o&&o.cursor||("topLeft"===t||"bottomRight"===t?"nwse-resize":"nesw-resize"),l=n.activeHandle||n.isBrushing?"none":"all";return i.a.createElement(p.a,{width:r,height:a,onDragMove:this.cornerDragMove,onDragEnd:this.cornerDragEnd,resetOnStart:!0},(function(e){var n=e.dragMove,h=e.dragEnd,d=e.dragStart,c=e.isDragging;return i.a.createElement("g",null,c&&i.a.createElement("rect",{fill:"transparent",width:r,height:a,style:{cursor:u},onMouseMove:n,onMouseUp:h}),i.a.createElement("rect",O({fill:"transparent",onMouseDown:d,onMouseMove:n,onMouseUp:h,className:"visx-brush-corner-"+t,style:O({cursor:u,pointerEvents:l},o)},s)))}))},r}(i.a.Component);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}S(D,"propTypes",{stageWidth:d.a.number.isRequired,stageHeight:d.a.number.isRequired,updateBrush:d.a.func.isRequired,onBrushEnd:d.a.func,corner:d.a.shape({x:d.a.number.isRequired,y:d.a.number.isRequired,width:d.a.number.isRequired,height:d.a.number.isRequired}).isRequired}),S(D,"defaultProps",{style:{}});var k={cursor:"move"},R=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return P(C(t=e.call.apply(e,[this].concat(r))||this),"selectionDragStart",(function(e){var n=t.props.onMoveSelectionChange;n&&n("move",m(e.event))})),P(C(t),"selectionDragMove",(function(e){var n=t.props,r=n.updateBrush;n.isControlled||r((function(t){var n=t.start,r=n.x,a=n.y,i=t.end,o=i.x,s=i.y,u=e.dx>0?Math.min(e.dx,t.bounds.x1-o):Math.max(e.dx,t.bounds.x0-r),l=e.dy>0?Math.min(e.dy,t.bounds.y1-s):Math.max(e.dy,t.bounds.y0-a);return B({},t,{isBrushing:!0,extent:B({},t.extent,{x0:r+u,x1:o+u,y0:a+l,y1:s+l})})}))})),P(C(t),"selectionDragEnd",(function(){var e=t.props,n=e.updateBrush,r=e.onBrushEnd,a=e.onMoveSelectionChange;e.isControlled||n((function(e){var t=B({},e,{isBrushing:!1,start:B({},e.start,{x:Math.min(e.extent.x0,e.extent.x1),y:Math.min(e.extent.y0,e.extent.y1)}),end:B({},e.end,{x:Math.max(e.extent.x0,e.extent.x1),y:Math.max(e.extent.y0,e.extent.y1)})});return r&&r(t),t})),a&&a()})),t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.width,n=e.height,r=e.stageWidth,a=e.stageHeight,o=e.brush,s=e.disableDraggingSelection,u=e.onMouseLeave,l=e.onMouseMove,h=e.onMouseUp,d=e.onClick,c=e.selectedBoxStyle,f=e.isControlled,g=e.isDragInProgress;return i.a.createElement(p.a,{width:t,height:n,resetOnStart:!0,onDragStart:this.selectionDragStart,onDragMove:this.selectionDragMove,onDragEnd:this.selectionDragEnd,isDragging:f?g:void 0},(function(e){var g=e.isDragging,p=e.dragStart,x=e.dragEnd,y=e.dragMove;return i.a.createElement("g",null,g&&i.a.createElement("rect",{width:r,height:a,fill:"transparent",onPointerUp:f?void 0:x,onPointerMove:y,onPointerLeave:f?void 0:x,style:k}),i.a.createElement("rect",B({x:Math.min(o.extent.x0,o.extent.x1),y:Math.min(o.extent.y0,o.extent.y1),width:t,height:n,className:"visx-brush-selection",onPointerDown:s?void 0:p,onPointerLeave:function(e){u&&u(e)},onPointerMove:function(e){y(e),l&&l(e)},onPointerUp:function(e){f||x(e),h&&h(e)},onClick:function(e){d&&d(e)},style:{pointerEvents:o.isBrushing||o.activeHandle?"none":"all",cursor:s?void 0:"move"}},c)))}))},r}(i.a.Component);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}P(R,"propTypes",{width:d.a.number.isRequired,height:d.a.number.isRequired,stageWidth:d.a.number.isRequired,stageHeight:d.a.number.isRequired,updateBrush:d.a.func.isRequired,onMoveSelectionChange:d.a.func,onBrushEnd:d.a.func,disableDraggingSelection:d.a.bool.isRequired,onMouseLeave:d.a.func,onMouseMove:d.a.func,onMouseUp:d.a.func,onClick:d.a.func,isControlled:d.a.bool,isDragInProgress:d.a.bool}),P(R,"defaultProps",{onMouseLeave:null,onMouseUp:null,onMouseMove:null,onClick:null});var L={cursor:"crosshair"},T=function(e){var t,n;function r(t){var n;_(A(n=e.call(this,t)||this),"mouseUpTime",0),_(A(n),"mouseDownTime",0),_(A(n),"handleWindowPointerUp",(function(){var e=n.props.useWindowMoveEvents,t=n.state.brushingType;e&&["top","bottom","left","right","select","move"].includes(null!=t?t:"")&&n.updateBrush((function(e){var t=e.start,n=e.end,r=e.extent;return t.x=Math.min(r.x0,r.x1),t.y=Math.min(r.y0,r.y0),n.x=Math.max(r.x0,r.x1),n.y=Math.max(r.y0,r.y1),j({},e,{activeHandle:null,isBrushing:!1,brushingType:void 0})}))})),_(A(n),"handleWindowPointerMove",(function(e){var t=n.props,r=t.useWindowMoveEvents,a=t.onBrushEnd,i=t.resetOnEnd,o=n.state,s=o.brushingType,u=o.isBrushing,l=o.brushPageOffset,h=o.start;if(r&&u){var d=e.pageX-((null==l?void 0:l.pageX)||0),c=e.pageY-((null==l?void 0:l.pageY)||0);["left","right","top","bottom"].includes(null!=s?s:"")&&n.updateBrush((function(e){var t=e.start,r=t.x,a=t.y,i=e.end,o=i.x,u=i.y;return j({},e,{isBrushing:!0,extent:j({},e.extent,n.getExtent({x:"left"===s?Math.min(Math.max(r+d,e.bounds.x0),e.bounds.x1):r,y:"bottom"===s?Math.min(Math.max(a+c,e.bounds.y0),e.bounds.y1):a},{x:"right"===s?Math.min(Math.max(o+d,e.bounds.x0),e.bounds.x1):o,y:"bottom"===s?Math.min(Math.max(u+c,e.bounds.y0),e.bounds.y1):u}))})})),"move"===s&&n.updateBrush((function(e){var t=e.start,n=t.x,r=t.y,a=e.end,i=a.x,o=a.y,s=d>0?Math.min(d,e.bounds.x1-i):Math.max(d,e.bounds.x0-n),u=c>0?Math.min(c,e.bounds.y1-o):Math.max(c,e.bounds.y0-r);return j({},e,{isBrushing:!0,extent:j({},e.extent,{x0:n+s,y0:r+u,x1:i+s,y1:o+u})})})),"select"===s&&n.updateBrush((function(e){var t=e.start,r=t.x,o=t.y,s={x:Math.min(Math.max(r+d,e.bounds.x0),e.bounds.x1),y:Math.min(Math.max(o+c,e.bounds.y0),e.bounds.y1)},u=j({},e,{end:s,extent:n.getExtent(h,s)});return a&&a(u),i&&n.reset(),u}))}})),_(A(n),"getExtent",(function(e,t){var r=n.props,a=r.brushDirection,i=r.width,o=r.height;return{x0:"vertical"===a?0:Math.min(e.x||0,t.x||0),x1:"vertical"===a?i:Math.max(e.x||0,t.x||0),y0:"horizontal"===a?0:Math.min(e.y||0,t.y||0),y1:"horizontal"===a?o:Math.max(e.y||0,t.y||0)}})),_(A(n),"handleDragStart",(function(e){var t=n.props,r=t.onBrushStart,a=t.left,i=t.top,o=t.inheritedMargin,s=t.useWindowMoveEvents,u=(null==o?void 0:o.left)?o.left:0,l=(null==o?void 0:o.top)?o.top:0,h={x:(e.x||0)+e.dx-a-u,y:(e.y||0)+e.dy-i-l},d=j({},h);r&&r(h),n.updateBrush((function(t){return j({},t,{start:h,end:d,extent:{x0:-1,x1:-1,y0:-1,y1:-1},isBrushing:!0,brushingType:"select",brushPageOffset:s?m(e.event):void 0})}))})),_(A(n),"handleDragMove",(function(e){var t=n.props,r=t.left,a=t.top,i=t.inheritedMargin,o=t.useWindowMoveEvents;if(e.isDragging&&!o){var s=(null==i?void 0:i.left)||0,u=(null==i?void 0:i.top)||0,l={x:(e.x||0)+e.dx-r-s,y:(e.y||0)+e.dy-a-u};n.updateBrush((function(e){var t=e.start,r=n.getExtent(t,l);return j({},e,{end:l,extent:r})}))}})),_(A(n),"handleDragEnd",(function(){var e=n.props,t=e.onBrushEnd,r=e.resetOnEnd;e.useWindowMoveEvents||n.updateBrush((function(e){var a=e.extent,i=j({},e,{start:{x:a.x0,y:a.y0},end:{x:a.x1,y:a.y1},isBrushing:!1,brushingType:void 0,activeHandle:null});return t&&t(i),r&&n.reset(),i}))})),_(A(n),"getBrushWidth",(function(){var e=n.state.extent,t=e.x0,r=e.x1;return Math.max(Math.max(t,r)-Math.min(t,r),0)})),_(A(n),"getBrushHeight",(function(){var e=n.state.extent,t=e.y1,r=e.y0;return Math.max(Math.max(r,t)-Math.min(r,t),0)})),_(A(n),"handles",(function(){var e=n.props.handleSize,t=n.state.extent,r=t.x0,a=t.x1,i=t.y0,o=t.y1,s=e/2,u=n.getBrushWidth(),l=n.getBrushHeight();return{top:{x:r-s,y:i-s,height:e,width:u+e},bottom:{x:r-s,y:o-s,height:e,width:u+e},right:{x:a-s,y:i-s,height:l+e,width:e},left:{x:r-s,y:i-s,height:l+e,width:e}}})),_(A(n),"corners",(function(){var e=n.props.handleSize,t=n.state.extent,r=t.x0,a=t.x1,i=t.y0,o=t.y1,s=e/2,u=e,l=e;return{topLeft:{x:Math.min(r,a)-s,y:Math.min(i,o)-s,width:u,height:l},topRight:{x:Math.max(r,a)-s,y:Math.min(i,o)-s,width:u,height:l},bottomLeft:{x:Math.min(r,a)-s,y:Math.max(i,o)-s,width:u,height:l},bottomRight:{x:Math.max(r,a)-s,y:Math.max(i,o)-s,width:u,height:l}}})),_(A(n),"updateBrush",(function(e){var t=n.props.onChange;n.setState(e,(function(){t&&t(n.state)}))})),_(A(n),"reset",(function(){var e=n.props,t=e.width,r=e.height;n.updateBrush((function(){return{start:{x:0,y:0},end:{x:0,y:0},extent:{x0:-1,x1:-1,y0:-1,y1:-1},bounds:{x0:0,x1:t,y0:0,y1:r},isBrushing:!1,brushPageOffset:void 0,activeHandle:null,brushingType:void 0}}))})),_(A(n),"handleBrushingTypeChange",(function(e,t){n.updateBrush((function(n){var r=j({},n,{brushingType:e,isBrushing:void 0!==e});return(t||void 0===e)&&(r.brushPageOffset=t),r}))}));var r=t.initialBrushPosition,a=r?n.getExtent(r.start,r.end):{x0:-1,x1:-1,y0:-1,y1:-1};return n.state={start:{x:Math.max(0,a.x0),y:Math.max(0,a.y0)},end:{x:Math.max(0,a.x1),y:Math.max(0,a.y1)},extent:a,bounds:{x0:0,x1:n.props.width,y0:0,y1:n.props.height},isBrushing:!1,brushingType:void 0,activeHandle:null},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidUpdate=function(e){var t=this;this.props.width===e.width&&this.props.height===e.height||this.setState((function(){return{bounds:{x0:0,x1:t.props.width,y0:0,y1:t.props.height}}}))},a.componentDidMount=function(){this.props.useWindowMoveEvents&&(window.addEventListener("mouseup",this.handleWindowPointerUp),window.addEventListener("mousemove",this.handleWindowPointerMove))},a.componentWillUnmount=function(){this.props.useWindowMoveEvents&&(window.removeEventListener("mouseup",this.handleWindowPointerUp),window.removeEventListener("mousemove",this.handleWindowPointerMove))},a.render=function(){var e=this,t=this.state,n=t.start,r=t.end,a=this.props,o=a.top,s=a.left,u=a.width,l=a.height,h=a.onMouseLeave,d=a.onMouseUp,g=a.onMouseMove,x=a.onBrushEnd,y=a.onClick,m=a.resizeTriggerAreas,v=a.selectedBoxStyle,b=a.disableDraggingSelection,M=a.clickSensitivity,O=a.useWindowMoveEvents,E=this.state.brushingType,S=this.handles(),B=this.corners(),C=this.getBrushWidth(),P=this.getBrushHeight(),k=new Set(m);return i.a.createElement(c.a,{className:"visx-brush",top:o,left:s},i.a.createElement(p.a,{width:u,height:l,resetOnStart:!0,onDragStart:this.handleDragStart,onDragMove:this.handleDragMove,onDragEnd:this.handleDragEnd,isDragging:O?"select"===E:void 0},(function(t){var n=t.dragStart,r=t.isDragging,a=t.dragMove,o=t.dragEnd;return i.a.createElement(f.a,{className:"visx-brush-overlay",fill:"transparent",x:0,y:0,width:u,height:l,onDoubleClick:function(){return e.reset()},onClick:function(t){var n=e.mouseUpTime-e.mouseDownTime;y&&n<M&&y(t)},onPointerDown:function(t){e.mouseDownTime=Date.now(),n(t)},onPointerLeave:function(e){h&&h(e)},onPointerMove:function(e){!r&&g&&g(e),r&&a(e)},onPointerUp:function(t){e.mouseUpTime=Date.now(),d&&d(t),o(t)},style:L})})),n&&r&&i.a.createElement(R,{updateBrush:this.updateBrush,width:C,height:P,stageWidth:u,stageHeight:l,brush:j({},this.state),disableDraggingSelection:b,onBrushEnd:x,onMouseLeave:h,onMouseMove:g,onMouseUp:d,onMoveSelectionChange:this.handleBrushingTypeChange,onClick:y,selectedBoxStyle:v,isControlled:O,isDragInProgress:O?"move"===E:void 0}),n&&r&&Object.keys(S).filter((function(e){return k.has(e)})).map((function(t){var n=S[t];return n&&i.a.createElement(w,{key:"handle-"+t,type:t,handle:n,stageWidth:u,stageHeight:l,updateBrush:e.updateBrush,brush:e.state,onBrushEnd:x,isControlled:O,isDragInProgress:O?E===t:void 0,onBrushHandleChange:e.handleBrushingTypeChange})})),n&&r&&Object.keys(B).filter((function(e){return k.has(e)})).map((function(t){var n=B[t];return n&&i.a.createElement(D,{key:"corner-"+t,type:t,brush:e.state,updateBrush:e.updateBrush,stageWidth:u,stageHeight:l,corner:n,onBrushEnd:x})})))},r}(i.a.Component);function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_(T,"propTypes",{brushDirection:d.a.oneOf(["horizontal","vertical","both"]),width:d.a.number.isRequired,height:d.a.number.isRequired,left:d.a.number.isRequired,top:d.a.number.isRequired,onChange:d.a.func,handleSize:d.a.number,resizeTriggerAreas:d.a.array,onBrushStart:d.a.func,onBrushEnd:d.a.func,onMouseLeave:d.a.func,onMouseUp:d.a.func,onMouseMove:d.a.func,onClick:d.a.func,clickSensitivity:d.a.number,disableDraggingSelection:d.a.bool,resetOnEnd:d.a.bool,useWindowMoveEvents:d.a.bool}),_(T,"defaultProps",{brushDirection:"both",inheritedMargin:{left:0,top:0,right:0,bottom:0},onChange:null,handleSize:4,resizeTriggerAreas:["left","right"],onBrushStart:null,onBrushEnd:null,onMouseLeave:null,onMouseUp:null,onMouseMove:null,onClick:null,disableDraggingSelection:!1,clickSensitivity:200,resetOnEnd:!1,initialBrushPosition:null,useWindowMoveEvents:!1});var z=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return W(q(t=e.call.apply(e,[this].concat(r))||this),"handleChange",(function(e){var n=t.props.onChange;if(n){var r=e.extent.x0;if("undefined"===typeof r||r<0)n(null);else n(t.convertRangeToDomain(e))}})),W(q(t),"handleBrushStart",(function(e){var n=t.props.onBrushStart;if(n){var r=e.x,a=e.y,i=t.props,o=i.xScale,s=i.yScale,u=x(o,r),l=x(s,a);n({x:o.invert?u:o.domain()[u],y:s.invert?l:s.domain()[l]})}})),W(q(t),"handleBrushEnd",(function(e){var n=t.props.onBrushEnd;if(n){var r=e.extent.x0;if("undefined"===typeof r||r<0)n(null);else n(t.convertRangeToDomain(e))}})),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.convertRangeToDomain=function(e){var t=this.props,n=t.xScale,r=t.yScale,a=e.extent,i=a.x0,o=a.x1,s=a.y0,u=a.y1,l=y(n,i||0,o||0,2),h=y(r,s||0,u||0,2);return{x0:l.start||0,x1:l.end||0,xValues:l.values,y0:h.start||0,y1:h.end||0,yValues:h.values}},a.render=function(){var e,t,n,r,a=this.props,o=a.xScale,s=a.yScale,u=a.height,l=a.width,h=a.margin,d=a.brushDirection,c=a.initialBrushPosition,f=a.innerRef,g=a.resizeTriggerAreas,p=a.brushRegion,x=a.yAxisOrientation,y=a.xAxisOrientation,m=a.selectedBoxStyle,v=a.disableDraggingSelection,b=a.resetOnEnd,M=a.onMouseLeave,w=a.onMouseMove,O=a.onClick,E=a.handleSize,S=a.useWindowMoveEvents;if(!o||!s)return null;var D=h&&h.left?h.left:0,B=h&&h.top?h.top:0,C=h&&h.right?h.right:0,P=h&&h.bottom?h.bottom:0;return"chart"===p?(n=0,r=0,e=l,t=u):"yAxis"===p?(r=0,t=u,"right"===x?(n=l,e=C):(n=-D,e=D)):(n=0,e=l,"bottom"===y?(r=u,t=P):(r=-B,t=B)),i.a.createElement(T,{width:e,height:t,left:n,top:r,brushDirection:d,disableDraggingSelection:v,handleSize:E,inheritedMargin:h,initialBrushPosition:c,ref:f,resetOnEnd:b,resizeTriggerAreas:g,selectedBoxStyle:m,onBrushEnd:this.handleBrushEnd,onBrushStart:this.handleBrushStart,onChange:this.handleChange,onClick:O,onMouseLeave:M,onMouseMove:w,useWindowMoveEvents:S})},r}(a.Component);W(z,"propTypes",{height:d.a.number,width:d.a.number,onChange:d.a.func,onBrushEnd:d.a.func,brushDirection:d.a.oneOf(["vertical","horizontal","both"]),resizeTriggerAreas:d.a.array,brushRegion:d.a.oneOf(["xAxis","yAxis","chart"]),yAxisOrientation:d.a.oneOf(["left","right"]),xAxisOrientation:d.a.oneOf(["top","bottom"]),disableDraggingSelection:d.a.bool,resetOnEnd:d.a.bool,handleSize:d.a.number,useWindowMoveEvents:d.a.bool}),W(z,"defaultProps",{xScale:null,yScale:null,onChange:null,height:0,width:0,selectedBoxStyle:{fill:"steelblue",fillOpacity:.2,stroke:"steelblue",strokeWidth:1,strokeOpacity:.8},margin:{top:0,left:0,right:0,bottom:0},handleSize:4,brushDirection:"horizontal",initialBrushPosition:null,resizeTriggerAreas:["left","right"],brushRegion:"chart",yAxisOrientation:"right",xAxisOrientation:"bottom",onBrushStart:null,onBrushEnd:null,disableDraggingSelection:!1,resetOnEnd:!1,onMouseMove:null,onMouseLeave:null,onClick:null,useWindowMoveEvents:!1});var H=z,N=n("a49c"),U=n("Cf/J"),V=n("ue4z"),I=n("9Jhr"),Y=n("a7GN"),F=n("KRsa"),J=n("EbDF"),K=i.a.createElement,X={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#fff"},G={dx:"-0.25em",dy:"0.25em",fontFamily:"Arial",fontSize:10,textAnchor:"end",fill:"#fff"};function Q(e){var t=e.data,n=e.gradientColor,r=e.width,a=e.yMax,i=e.margin,o=e.xScale,s=e.yScale,u=e.hideBottomAxis,l=void 0!==u&&u,h=e.hideLeftAxis,d=void 0!==h&&h,f=e.top,g=e.left,p=e.children;return r<10?null:K(c.a,{left:g||i.left,top:f||i.top},K(U.a,{id:"gradient",from:n,fromOpacity:1,to:n,toOpacity:.2}),K(I.a,{data:t,x:function(e){return o(function(e){return new Date(e.date)}(e))||0},y:function(e){return s(function(e){return e.close}(e))||0},yScale:s,strokeWidth:1,stroke:"url(#gradient)",fill:"url(#gradient)",curve:J.a}),!l&&K(Y.a,{top:a,scale:o,numTicks:r>520?10:5,stroke:"#fff",tickStroke:"#fff",tickLabelProps:function(){return X}}),!d&&K(F.a,{scale:s,numTicks:5,stroke:"#fff",tickStroke:"#fff",tickLabelProps:function(){return G}}),p)}try{Q.displayName="AreaChart",Q.__docgenInfo={description:"",displayName:"AreaChart",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"AppleStock[]"}},gradientColor:{defaultValue:null,description:"",name:"gradientColor",required:!0,type:{name:"string"}},xScale:{defaultValue:null,description:"",name:"xScale",required:!0,type:{name:"ScaleRadial<number, number, never> | ScaleTime<number, number, never> | ScaleLinear<number, number, never> | ScaleLogarithmic<number, number, never> | ... 7 more ... | ScaleOrdinal<...>"}},yScale:{defaultValue:null,description:"",name:"yScale",required:!0,type:{name:"ScaleRadial<number, number, never> | ScaleTime<number, number, never> | ScaleLinear<number, number, never> | ScaleLogarithmic<number, number, never> | ... 7 more ... | ScaleOrdinal<...>"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},yMax:{defaultValue:null,description:"",name:"yMax",required:!0,type:{name:"number"}},margin:{defaultValue:null,description:"",name:"margin",required:!0,type:{name:"{ top: number; right: number; bottom: number; left: number; }"}},hideBottomAxis:{defaultValue:{value:!1},description:"",name:"hideBottomAxis",required:!1,type:{name:"boolean | undefined"}},hideLeftAxis:{defaultValue:{value:!1},description:"",name:"hideLeftAxis",required:!1,type:{name:"boolean | undefined"}},top:{defaultValue:null,description:"",name:"top",required:!1,type:{name:"number | undefined"}},left:{defaultValue:null,description:"",name:"left",required:!1,type:{name:"number | undefined"}}}},"undefined"!==typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sandboxes/visx-brush/AreaChart.tsx#AreaChart"]={docgenInfo:Q.__docgenInfo,name:"AreaChart",path:"src/sandboxes/visx-brush/AreaChart.tsx#AreaChart"})}catch(le){}var Z=i.a.createElement;function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=l.a.slice(1e3),ne={top:10,bottom:15,left:50,right:20},re="#f6acc8",ae="#584153",ie={fill:"url(#".concat("brush_pattern",")"),stroke:"white"},oe=function(e){return new Date(e.date)},se=function(e){return e.close};function ue(e){var t=e.compact,n=void 0!==t&&t,r=e.width,i=e.height,u=e.margin,l=void 0===u?{top:20,left:50,bottom:20,right:20}:u,h=Object(a.useRef)(null),d=Object(a.useState)(te),c=d[0],f=d[1],g=i-l.top-l.bottom,p=n?15:40,x=.8*g-p,y=g-x-30,m=Math.max(r-l.left-l.right,0),v=Math.max(x,0),b=Math.max(r-ne.left-ne.right,0),M=Math.max(y-ne.top-ne.bottom,0),w=Object(a.useMemo)((function(){return Object(o.a)({range:[0,m],domain:Object(V.b)(c,oe)})}),[m,c]),O=Object(a.useMemo)((function(){return Object(s.a)({range:[v,0],domain:[0,Object(V.c)(c,se)||0],nice:!0})}),[v,c]),E=Object(a.useMemo)((function(){return Object(o.a)({range:[0,b],domain:Object(V.b)(te,oe)})}),[b]),S=Object(a.useMemo)((function(){return Object(s.a)({range:[M,0],domain:[0,Object(V.c)(te,se)||0],nice:!0})}),[M]),D=Object(a.useMemo)((function(){return{start:{x:E(oe(te[50]))},end:{x:E(oe(te[100]))}}}),[E]);return Z("div",null,Z("svg",{width:r,height:i},Z(U.a,{id:"brush_gradient",from:ae,to:"#af8baf",rotate:45}),Z("rect",{x:0,y:0,width:r,height:i,fill:"url(#".concat("brush_gradient",")"),rx:14}),Z(Q,{hideBottomAxis:n,data:c,width:r,margin:ee(ee({},l),{},{bottom:p}),yMax:v,xScale:w,yScale:O,gradientColor:"#af8baf"}),Z(Q,{hideBottomAxis:!0,hideLeftAxis:!0,data:te,width:r,yMax:M,xScale:E,yScale:S,margin:ne,top:x+p+l.top,gradientColor:"#af8baf"},Z(N.a,{id:"brush_pattern",height:8,width:8,stroke:re,strokeWidth:1,orientation:["diagonal"]}),Z(H,{xScale:E,yScale:S,width:b,height:M,margin:ne,handleSize:8,innerRef:h,resizeTriggerAreas:["left","right"],brushDirection:"horizontal",initialBrushPosition:D,onChange:function(e){if(e){var t=e.x0,n=e.x1,r=e.y0,a=e.y1,i=te.filter((function(e){var i=oe(e).getTime(),o=se(e);return i>t&&i<n&&o>r&&o<a}));f(i)}},onClick:function(){return f(te)},selectedBoxStyle:ie,useWindowMoveEvents:!0}))),Z("button",{onClick:function(){(null===h||void 0===h?void 0:h.current)&&(f(te),h.current.reset())}},"Clear"),"\xa0",Z("button",{onClick:function(){if(null===h||void 0===h?void 0:h.current){h.current.updateBrush((function(e){var t=h.current.getExtent(D.start,D.end);return ee(ee({},e),{},{start:{y:t.y0,x:t.x0},end:{y:t.y1,x:t.x1},extent:t})}))}}},"Reset"))}t.c=ue;try{ue.displayName="BrushChart",ue.__docgenInfo={description:"",displayName:"BrushChart",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},margin:{defaultValue:{value:"{\n    top: 20,\n    left: 50,\n    bottom: 20,\n    right: 20,\n  }"},description:"",name:"margin",required:!1,type:{name:"{ top: number; right: number; bottom: number; left: number; } | undefined"}},compact:{defaultValue:{value:!1},description:"",name:"compact",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!==typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sandboxes/visx-brush/Example.tsx#BrushChart"]={docgenInfo:ue.__docgenInfo,name:"BrushChart",path:"src/sandboxes/visx-brush/Example.tsx#BrushChart"})}catch(le){}},KRsa:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("ERkP"),a=n.n(r),i=n("O94r"),o=n.n(i),s=n("5Nbk"),u=n("pn27");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=function(){return{dx:"-0.25em",dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"end"}};function d(e){var t=e.axisClassName,n=e.labelOffset,r=void 0===n?36:n,i=e.tickLabelProps,d=void 0===i?h:i,c=e.tickLength,f=void 0===c?8:c,g=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["axisClassName","labelOffset","tickLabelProps","tickLength"]);return a.a.createElement(s.a,l({axisClassName:o()("visx-axis-left",t),labelOffset:r,orientation:u.a.left,tickLabelProps:d,tickLength:f},g))}},LpNs:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0===e?{}:e,n=t.resetOnStart,r=void 0!==n&&n,u=t.onDragEnd,l=t.onDragMove,h=t.onDragStart,d=t.x,c=t.y,f=t.dx,g=t.dy,p=t.isDragging,x=(0,a.useRef)({x:d,y:c,dx:f,dy:g}),y=(0,o.default)({x:d,y:c,dx:null!=f?f:0,dy:null!=g?g:0,isDragging:!1}),m=y[0],v=y[1];(0,a.useEffect)((function(){x.current.x===d&&x.current.y===c&&x.current.dx===f&&x.current.dy===g||(x.current={x:d,y:c,dx:f,dy:g},v((function(e){return s({},e,{x:d,y:c,dx:null!=f?f:0,dy:null!=g?g:0})})))})),(0,a.useEffect)((function(){void 0!==p&&m.isDragging!==p&&v((function(e){return s({},e,{isDragging:p})}))}),[m.isDragging,p,v]);var b=(0,a.useCallback)((function(e){e.persist(),v((function(t){var n=(0,i.localPoint)(e)||{x:0,y:0};return{isDragging:!0,dx:r?0:t.dx,dy:r?0:t.dy,x:r?n.x:n.x-t.dx,y:r?n.y:n.y-t.dy}}),h&&function(t){h(s({},t,{event:e}))})}),[h,r,v]),M=(0,a.useCallback)((function(e){e.persist(),v((function(t){var n=(0,i.localPoint)(e)||{x:0,y:0};return t.isDragging?s({},t,{isDragging:!0,dx:n.x-(t.x||0),dy:n.y-(t.y||0)}):t}),l&&function(t){t.isDragging&&l(s({},t,{event:e}))})}),[l,v]),w=(0,a.useCallback)((function(e){e.persist(),v((function(e){return s({},e,{isDragging:!1})}),u&&function(t){u(s({},t,{event:e}))})}),[u,v]);return s({},m,{dragEnd:w,dragMove:M,dragStart:b})};var r,a=n("ERkP"),i=n("MiVw"),o=(r=n("NzS/"))&&r.__esModule?r:{default:r};function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},MiVw:function(e,t,n){"use strict";n.r(t);var r=n("jpI8");n.d(t,"localPoint",(function(){return r.a}));var a=n("VB+g");n.d(t,"touchPoint",(function(){return a.a}))},MrGM:function(e){e.exports=JSON.parse('{"name":"@visx/demo-brush","description":"Standalone visx brush demo.","main":"index.tsx","private":true,"dependencies":{"@babel/runtime":"^7.8.4","@types/react":"^16","@types/react-dom":"^16","@visx/axis":"latest","@visx/brush":"latest","@visx/curve":"latest","@visx/gradient":"latest","@visx/group":"latest","@visx/mock-data":"latest","@visx/pattern":"latest","@visx/responsive":"latest","@visx/scale":"latest","@visx/shape":"latest","d3-array":"^2.4.0","react":"^16.8","react-dom":"^16.8","react-scripts-ts":"3.1.0","typescript":"^3"},"keywords":["visualization","d3","react","visx","brush","interaction"]}')},"NzS/":function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=(0,r.useState)(e),n=t[0],a=t[1],i=(0,r.useRef)(null),o=(0,r.useCallback)((function(e,t){i.current=t||null,a(e)}),[a]);return(0,r.useLayoutEffect)((function(){i.current&&(i.current(n),i.current=null)}),[n]),[n,o]};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n("ERkP"));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}},a7GN:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("ERkP"),a=n.n(r),i=n("O94r"),o=n.n(i),s=n("5Nbk"),u=n("pn27");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=function(){return{dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"middle"}};function d(e){var t=e.axisClassName,n=e.labelOffset,r=void 0===n?8:n,i=e.tickLabelProps,d=void 0===i?h:i,c=e.tickLength,f=void 0===c?8:c,g=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["axisClassName","labelOffset","tickLabelProps","tickLength"]);return a.a.createElement(s.a,l({axisClassName:o()("visx-axis-bottom",t),labelOffset:r,orientation:u.a.bottom,tickLabelProps:d,tickLength:f},g))}},wQia:function(e,t,n){"use strict";t.__esModule=!0,t.default=s;var r=o(n("aWzz")),a=o(n("ERkP")),i=o(n("LpNs"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.captureDragArea,n=void 0===t||t,r=e.children,o=e.dx,s=e.dy,u=e.height,l=e.onDragEnd,h=e.onDragMove,d=e.onDragStart,c=e.resetOnStart,f=e.width,g=e.x,p=e.y,x=e.isDragging,y=(0,i.default)({resetOnStart:c,onDragEnd:l,onDragMove:h,onDragStart:d,x:g,y:p,dx:o,dy:s,isDragging:x});return a.default.createElement(a.default.Fragment,null,y.isDragging&&n&&a.default.createElement("rect",{width:f,height:u,onPointerMove:y.dragMove,onPointerUp:y.dragEnd,fill:"transparent"}),r(y))}s.propTypes={children:r.default.func.isRequired,width:r.default.number.isRequired,height:r.default.number.isRequired,captureDragArea:r.default.bool,isDragging:r.default.bool}}}]);